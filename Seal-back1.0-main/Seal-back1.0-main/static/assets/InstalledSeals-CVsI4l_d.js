import{_ as f,c as o,a as s,f as u,e as d,v as p,b,F as h,j as I,l as v,o as m,h as _}from"./index-BvItkERQ.js";const c=v.create({baseURL:"http://192.168.2.6:3000",headers:{"Content-Type":"application/json"}}),F={name:"InstalledSeals",data(){return{installForm:{seal_number:"",serial_number:"",note:""},selectedImages:[],technicianToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NDI4NjgzMjgsInJvbGUiOiJ0ZWNobmljaWFuIiwidGVjaF9pZCI6MjEsInVzZXJuYW1lIjoiY2F0In0.uFkWy5G9-ttlJnRogHzfHGPJVC1SBwuUjaprSBbuys0",imagePreviewUrls:[],maxImages:5}},created(){if(!this.technicianToken){alert("‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö Token ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà");return}c.defaults.headers.common.Authorization=`Bearer ${this.technicianToken}`},methods:{triggerFileInput(){this.$refs.fileInput.click()},onImageSelected(a){const e=Array.from(a.target.files);if(this.selectedImages.length+e.length>this.maxImages){alert(`‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ${this.maxImages} ‡∏£‡∏π‡∏õ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô`);return}e.forEach(n=>{if(n.type.startsWith("image/")){this.selectedImages.push(n);const r=new FileReader;r.onload=l=>{this.imagePreviewUrls.push(l.target.result)},r.readAsDataURL(n)}})},removeImage(a){this.selectedImages.splice(a,1),this.imagePreviewUrls.splice(a,1)},async submitInstallation(){try{if(!this.technicianToken){alert("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö Token ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà");return}console.log("üîë ‡∏™‡πà‡∏á Token:",this.technicianToken);const a={seal_number:this.installForm.seal_number,serial_number:this.installForm.serial_number,remark:this.installForm.note||""},e=await c.put("/api/technician/seals/install",a);if(console.log("‚úÖ ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ã‡∏µ‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:",e.data),this.selectedImages.length>0){const n=new FormData;n.append("seal_number",this.installForm.seal_number),this.selectedImages.forEach((l,i)=>{n.append(`image${i+1}`,l)});const r=await c.post("/api/technician/seals/upload-images",n,{headers:{"Content-Type":"multipart/form-data"}});console.log("‚úÖ ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:",r.data),alert("‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!")}else alert("‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û");this.installForm={seal_number:"",serial_number:"",note:""},this.selectedImages=[],this.imagePreviewUrls=[]}catch(a){console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î:",a),a.response?(console.error("üî¥ Response Data:",a.response.data),alert(`‚ùå ${a.response.data.message||"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"}`)):alert("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå")}}}},w={class:"installed-seals"},k={class:"form-container"},y={class:"install-form"},U={class:"form-group"},C={class:"input-group with-button"},S={class:"input-wrapper"},T={class:"form-group"},j={class:"input-group"},x={class:"input-wrapper"},V={class:"form-group"},J={class:"input-group"},N={class:"input-wrapper"},D={class:"form-group"},P={class:"image-upload-container"},R={key:0,class:"preview-container"},B=["src"],z=["onClick"],E=["disabled"];function G(a,e,n,r,l,i){return m(),o("div",w,[e[16]||(e[16]=s("div",{class:"header"},[s("div",{class:"header-content"},[s("h1",null,[s("i",{class:"fas fa-tools"}),u(" ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Seal")]),s("p",{class:"subtitle"},"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Seal ‡∏Å‡∏±‡∏ö‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå")])],-1)),s("div",k,[s("div",y,[s("div",U,[e[7]||(e[7]=s("label",null,"‡∏£‡∏´‡∏±‡∏™ Seal",-1)),s("div",C,[s("div",S,[e[6]||(e[6]=s("i",{class:"fas fa-barcode"},null,-1)),d(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.installForm.seal_number=t),placeholder:"‡∏Å‡∏£‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πÅ‡∏Å‡∏ô‡∏£‡∏´‡∏±‡∏™ Seal",required:""},null,512),[[p,l.installForm.seal_number]])])])]),s("div",T,[e[9]||(e[9]=s("label",null,"Serial Number ‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå",-1)),s("div",j,[s("div",x,[e[8]||(e[8]=s("i",{class:"fas fa-tag"},null,-1)),d(s("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.installForm.serial_number=t),placeholder:"‡∏Å‡∏£‡∏≠‡∏Å Serial Number ‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå",required:""},null,512),[[p,l.installForm.serial_number]])])])]),s("div",V,[e[11]||(e[11]=s("label",null,"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)",-1)),s("div",J,[s("div",N,[e[10]||(e[10]=s("i",{class:"fas fa-comment-alt"},null,-1)),d(s("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.installForm.note=t),placeholder:"‡∏Å‡∏£‡∏≠‡∏Å‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á",rows:"3"},null,512),[[p,l.installForm.note]])])])]),s("div",D,[e[14]||(e[14]=s("label",null,[s("i",{class:"fas fa-camera"}),u(" ‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á ")],-1)),s("div",P,[s("div",{class:"upload-button",onClick:e[3]||(e[3]=(...t)=>i.triggerFileInput&&i.triggerFileInput(...t))},e[12]||(e[12]=[s("i",{class:"fas fa-cloud-upload-alt"},null,-1),s("span",null,"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",-1),s("small",null,"‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 2 ‡∏£‡∏π‡∏õ",-1)])),s("input",{type:"file",ref:"fileInput",multiple:"",accept:"image/*",onChange:e[4]||(e[4]=(...t)=>i.onImageSelected&&i.onImageSelected(...t)),style:{display:"none"}},null,544),l.imagePreviewUrls.length?(m(),o("div",R,[(m(!0),o(h,null,I(l.imagePreviewUrls,(t,g)=>(m(),o("div",{key:g,class:"preview-item"},[s("img",{src:t,alt:"preview"},null,8,B),s("button",{class:"remove-btn",onClick:_(W=>i.removeImage(g),["prevent"])},e[13]||(e[13]=[s("i",{class:"fas fa-times"},null,-1)]),8,z)]))),128))])):b("",!0)])]),s("button",{class:"submit-btn",onClick:e[5]||(e[5]=(...t)=>i.submitInstallation&&i.submitInstallation(...t)),disabled:!l.installForm.seal_number||!l.installForm.serial_number},e[15]||(e[15]=[s("i",{class:"fas fa-check-circle"},null,-1),u(" ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á ")]),8,E)])])])}const M=f(F,[["render",G],["__scopeId","data-v-021d8f92"]]);export{M as default};
